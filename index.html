<!DOCTYPE html>
<html lang="zh-CN">
<!-- ä¸€ç»ƒæ–‡æ¡£ å‰ç«¯æ¿Beta-0.2 -->
<!-- ä½œè€…ï¼šNianSir -->
<!-- æ—¶é—´ï¼š2024å¹´6æœˆ30æ—¥15:30:43 -->
<!-- å¼€æºåœ°å€ï¼šhttps://github.com/NianLog/OneGlance -->
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>âœä¸€ç»ƒæ–‡æ¡£ - åªåšå®ç”¨çš„å­¦ä¹ åˆ†äº«</title>
    <link rel="stylesheet" href="assets/twcss.css">
    <style>
        /* ç‰ˆæƒä¿¡æ¯ */
        .copyright {
            position: fixed;
            bottom: 0;
            width: 100%;
            background-color: #333;
            color: white;
            text-align: center;
            padding: 10px;
        }

        #markdown-content {
            margin: 0 3em;
        }
    </style>
</head>

<body>
    <div class="min-h-screen bg-zinc-100 dark:bg-zinc-900 text-zinc-900 dark:text-zinc-100">
        <div class="container mx-auto p-4">
            <header class="flex justify-between items-center mb-8">
                <h1 class="text-4xl font-bold">âœä¸€ç»ƒ</h1>
                <button id="toggleDarkMode"
                    class="bg-zinc-300 dark:bg-zinc-700 text-zinc-900 dark:text-zinc-100 p-2 rounded">
                    åˆ‡æ¢æ¨¡å¼
                </button>
            </header>
            <section class="text-center mb-8">
                <h2 class="text-4xl font-bold text-purple-700 animate-pulse">çºµä½¿åå¹´ç£¨ä¸€å‰‘ï¼Œä¸å¦‚ä»Šæœçœ‹ä¸€ç»ƒ</h2>
                <h4 class="text-lg text-gray-600 animate-bounce">The Blade of Decades? Your Exam Aid in a Single Glance.
                </h4>
                <p class="text-lg">Welcome~ æ¬¢è¿æ¥åˆ° [âœä¸€ç»ƒ] åœ¨çº¿çŸ¥è¯†æ–‡æ¡£ï¼Œè¿™é‡Œæ±‡é›†äº†ä¸°å¯Œçš„åº”è¯•åœ¨çº¿æ–‡æ¡£èµ„æºï¼ŒåŠ©åŠ›é«˜æ•ˆå¤ä¹ ï¼Œå¿«é€Ÿåº”å¯¹æœŸæœ«å‘¨ï¼<br>å¦‚æœæ‚¨ä¹Ÿæœ‰å¥½çš„èµ„æºå¯ä»¥åˆ†äº«ï¼Œè¯·åœ¨ <a
                        href="https://emos.niansir.com/s/obVTUs" target="_blank" rel="noopener noreferrer"
                        class="text-blue-500 underline hover:text-blue-700 transition-all">æ­¤å¤„</a> æäº¤ç»™æˆ‘ä»¬ï¼Œæ‹¯æ•‘æ›´å¤šä¼™ä¼´ï¼</p>
            </section>
            <section>
                <div class="flex items-center">
                    <img src="./assets/image/logo.png" alt="ä¸€ç»ƒæ–‡æ¡£" class="mr-2 h-6 w-6">
                    <h2 class="text-3xl font-semibold mb-4">ä¸€ç»ƒæ–‡æ¡£åˆ—è¡¨</h2>
                </div>                           
                <div id="fileList" class="grid gap-4 sm:grid-cols-2 lg:grid-cols-3">

                </div>
            </section>
        </div>
    </div>
    <!-- Modal for password input -->
    <div id="passwordModal"
        class="fixed top-0 left-0 w-full h-full flex items-center justify-center hidden bg-black bg-opacity-50">
        <div class="bg-white p-4 rounded shadow max-w-md">
            <p class="text-center">ğŸ”‘è®¿é—®å¯†ç æ•ˆéªŒ</p>
            <input id="passwordInput" type="password" placeholder="è¯·è¾“å…¥è®¿é—®ç§˜é’¥"
                class="w-full p-2 rounded border border-gray-300 mb-4">
            <div class="flex justify-between">
                <button id="cancelPassword" class="bg-gray-500 text-white p-2 rounded">å–æ¶ˆ</button>
                <button id="submitPassword" class="bg-blue-500 text-white p-2 rounded">éªŒè¯</button>
            </div>
        </div>
    </div>
    <div class="copyright">
        &copy; 2024 âœä¸€ç»ƒ | æœåŠ¡æ”¯æŒï¼šå¹´å…ˆç”Ÿ NianSir
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const fileList = document.getElementById('fileList');
            const toggleDarkMode = document.getElementById('toggleDarkMode');
            const passwordModal = document.getElementById('passwordModal');
            const cancelPassword = document.getElementById('cancelPassword');
            const passwordInput = document.getElementById('passwordInput');
            const submitPassword = document.getElementById('submitPassword');

            // åˆ‡æ¢ç™½å¤©/é»‘å¤œæ¨¡å¼
            toggleDarkMode.addEventListener('click', () => {
                document.documentElement.classList.toggle('dark');
            });

            // è¯»å– JSON é…ç½®æ–‡ä»¶
            fetch('mymd/config.json')
                .then(response => response.json())
                .then(data => {
                    data.files.forEach(file => {
                        const fileCard = document.createElement('div');
                        fileCard.className = 'bg-white dark:bg-zinc-800 p-4 rounded shadow';
                        fileCard.innerHTML = `
            <h2 class="text-xl font-semibold mb-2">${file.name}</h2>
            <button class="bg-blue-500 text-white p-2 rounded view-file" data-path="${file.path}" data-key="${file.key}">æŸ¥çœ‹æ–‡æ¡£</button>
            <p class="whitespace-pre-line text-sm leading-normal mt-2">${file.info}</p>
          `;
                        fileList.appendChild(fileCard);
                    });
                    // æŸ¥çœ‹æ–‡æ¡£æŒ‰é’®ç‚¹å‡»äº‹ä»¶
                    document.querySelectorAll('.view-file').forEach(button => {
                        button.addEventListener('click', handleViewFileClick);
                    });
                })
                .catch(error => console.error('Error loading config:', error));
        });
        function handleViewFileClick() {
            passwordModal.classList.remove('hidden');
            const path = this.dataset.path;
            const key = this.dataset.key;

            cancelPassword.addEventListener('click', () => {
                passwordModal.classList.add('hidden');
                passwordInput.value = '';
            });

            function submitPasswordClickHandler() {
                const inputKey = passwordInput.value.trim();
                if (inputKey === key && inputKey !== '') {
                    sessionStorage.setItem('isPasswordValidated', 'true');
                    window.location.href = `/viewBox.html?file=${encodeURIComponent(path)}`;
                } else {
                    alert('å¯†ç éªŒè¯å¤±è´¥ï¼Œè¯·é‡è¯•.');
                }
            }
            // ç§»é™¤æ—§çš„ç‚¹å‡»äº‹ä»¶å¤„ç†ç¨‹åº
            submitPassword.removeEventListener('click', submitPasswordClickHandler);

            // æ·»åŠ æ–°çš„ç‚¹å‡»äº‹ä»¶å¤„ç†ç¨‹åº
            submitPassword.addEventListener('click', submitPasswordClickHandler);
        }
    </script>
</body>

</html>